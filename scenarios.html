<!DOCTYPE html>
<html lang="en_US">

<head>
    <title>FPL Optimized  - Scenarios</title>
    <meta charset="UTF-8" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="description" content="Optimized squads for Fantasy Premier League -- everyday!" />
    <meta name="keywords" content="fantasy, football, soccer, premier league, mathematics, optimization, analytics, sports" />
    <meta name="author" content="Sertalp B. Cay (sertalpbilal@gmail.com)" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/js/fontawesome.min.js" integrity="sha256-TMRxGf3NaZhrxTfD8y/NGiyE4UXBA3udH1l+Co8JDVU=" crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3.v6.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-interpolate/1.3.0/d3-interpolate.js" integrity="sha512-KcUKnCgVgjA6pyyyN33d5S1IHk9hFUaldkL8BmKvqR+7q9HyZj3jmWJemF6IJuLkcj3biCNzdGgXNPJCjurXnQ==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css" integrity="sha256-rx5u3IdaOCszi7Jb18XD9HSn8bNiEgAqWJbdBvIYYyU=" crossorigin="anonymous">
    <!-- <link href="url_for('static', filename='3rdparty/vis-timeline-graph2d.min.css')" rel="stylesheet" type="text/css" /> -->

    <!-- <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css"> -->
    <!-- <link rel="stylesheet" href="https://cdn.datatables.net/searchbuilder/1.0.1/css/searchBuilder.dataTables.min.css"> -->
    <!-- <link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/3.3.2/css/fixedColumns.dataTables.min.css"> -->
    <!-- <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css"> -->
    <!-- <link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/3.3.2/css/fixedColumns.bootstrap4.min.css"> -->
    <!-- <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.6/css/responsive.bootstrap4.min.css"> -->

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.23/b-1.6.5/b-colvis-1.6.5/b-html5-1.6.5/fc-3.3.2/fh-3.1.7/r-2.2.6/sp-1.2.2/datatables.min.css" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L07T8LS957"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'G-L07T8LS957');
    </script>

    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/svg.css">

    <link rel="manifest" href="/static/asset/manifest.json">
    <link rel="apple-touch-icon" href="/static/asset/apple_logo_114.png">
    <link rel="apple-touch-startup-image" href="/static/asset/apple_splash_320.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FPLOptimized">

</head>

<body>

    <div id="app">

        <header class="bg-dark-gray mb-1">
            <div class="container">
                <nav class="navbar navbar-collapse navbar-dark container-fluid pl-0 pr-0">
                    <a class="navbar-brand ml-0 ml-md-3 mr-0 mr-md-3 mr-auto flex-grow-1" href="/" aria-label="Bootstrap">FPL Optimized</a>
                    <!-- <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#menuToggler" aria-controls="menuToggler" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse text-secondary flex-row-reverse" id="menuToggler">
                        <span class="twitter-link ml-2 float-right"><a href="https://twitter.com/sertalpbilal"></a></span>
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="week.html">Optimal Squads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="live_gw.html">Live GW</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="team_summary.html">GW Summary</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="fpl_analytics_league.html">FPL Analytics xP League</a>
                            </li>
                            <li class="nav-item no-sep">
                                <a class="nav-link" href="https://twitter.com/sertalpbilal" target=_blank><i class="fab fa-twitter-square"></i></a>
                            </li>
                        </ul>
                    </div> -->
                </nav>
            </div>
        </header>


        <!-- <div class="mt-1 container">
            <div class="row pl-3 pr-3">
                <div class="col-12 alert alert-info alert-dismissible text-small fade show" role="alert">
                    <i class="fas fa-info-circle"></i> First time on FPL Optimized? Read a summary of tools <a target="_blank" href="https://threadreaderapp.com/thread/1391100607205941253.html">here.</a>
                    <button type="button" class="close top-close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
        </div> -->

        <!-- <div class="mt-2 container">
            <div class="row pl-3 pr-3">
                <div class="col-12 alert alert-warning alert-dismissible text-small fade show" role="alert">
                    <i class="fas fa-info-circle"></i> FPLOptimized is getting ready for the new season! Some functonalities may not work properly.</a>
                    <button type="button" class="close top-close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
        </div> -->
<!--         
        <div class="mt-2 container">
            <div class="row pl-3 pr-3">
                <div class="col-12 alert alert-success alert-dismissible text-small fade show" role="alert">
                    <i class="fas fa-info-circle"></i> FPLOptimized is ready for new season! Welcome back :)</a>
                    <button type="button" class="close top-close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
        </div> -->


<main class="container" v-cloak v-if="ready">
    <div class="row mb-3">
        <div class="col-12">
            <div class="card border-dark bg-squad-card text-white">
                <h5 class="card-header border-complement text-center scenario_title">
                    <div class="mb-2"><i class="fas fa-dice-d20 mr-1"></i> Simulated Scenarios</div>
                    <div>
                        <span class="d-inline-block">
                            <select class="form-control live-select" v-model="active_sc" @change="update_sim_values()">
                                <option v-for="(k, i) in sc_files" :value="i">{{ k[0] }}</option>
                            </select>
                        </span>
                        with
                        <span>
                            <span class="d-inline-block">
                                <select class="form-control live-select" v-model="active_sample" @change="update_field_values()">
                                    <option v-for="(k, i) in samples" :value="i">{{ k }}</option>
                                    <option value="custom">Custom</option>
                                </select>
                            </span>
                            <span class="d-inline-block text-small">
                                <div class="custom-control custom-switch ml-1 mr-1">
                                    <input id="eo-toggle" type="checkbox" data-toggle="toggle" v-model="use_eo" class="custom-control-input mr-1">
                                    <label for="eo-toggle" class="custom-control-label">Use EO</label>
                                </div>
                            </span>
                        </span>
                        <span v-if="rival_mode">
                            <b>against <span style="color:darkkhaki">Rival</span></b>
                        </span>
                    </div>
                    <!-- GW{{ current_gw }} -->
                </h5>
                <div class="border-complement card-header text-center">
                    <div class="custom-control custom-switch ml-1 mr-1">
                        <input id="rival-toggle" type="checkbox" data-toggle="toggle" v-model="rival_mode" class="custom-control-input mr-1">
                        <label for="rival-toggle" class="custom-control-label">Rival Mode</label>
                    </div>
                    <!-- <div class="custom-control custom-switch ml-1 mr-1" v-if="!is_next_gw">
                        <input id="result-toggle" type="checkbox" data-toggle="toggle" v-model="show_gw_result" class="custom-control-input mr-1">
                        <label for="result-toggle" class="custom-control-label">Show GW Result</label>
                    </div> -->
                </div>
                <div class="scenario_detail">
                    Simulated outcomes based on current projections
                </div>
                <div class="card-body text-center p-3 animate-height" v-cloak>
                    <div class="row no-gutters justify-content-center">
                        <div class="col-lg-5 col-8 form-inline justify-content-center">
                            <div class="input-group mb-1">
                                <input type="number" class="form-control" placeholder="Team ID" v-model="team_id" :disabled="loading" v-on:keyup="submitTeam">
                                <div class="input-group-append">
                                    <button class="btn btn-primary" type="button" @click="fetch_team_picks" :disabled="loading">Fetch</button>
                                </div>
                            </div>
                            <span class="ml-1 mr-1 mb-1"> or </span>
                            <button class="btn btn-secondary mb-1" type="button" @click="paste_data" :disabled="loading">Paste Data</button>
                        </div>
                    </div>
                    <div class="mt-2 row no-gutters justify-content-center" v-if="rival_mode">
                        <div class="col-lg-5 col-8 form-inline justify-content-center">
                            <div class="input-group mb-1">
                                <input type="number" class="form-control" placeholder="Rival ID" v-model="rival_id" :disabled="loading" v-on:keyup="submitRival">
                                <div class="input-group-append">
                                    <button class="btn btn-primary" type="button" @click="fetch_rival_picks" :disabled="loading">Fetch</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row no-gutters justify-content-center" v-show="display_paste">
                        <div class="col-12 col-lg-5">
                            <div class="form-group">
                                <label for="paste_area">If you are logged in to FPL: enter your team ID above <span v-show="team_id != ''">and copy contents of <a target="_blank" :href="'https://fantasy.premierleague.com/api/my-team/' + team_id + '/'">this link</a></span></label>
                                <textarea class="form-control" id="paste_area" rows="3"></textarea>
                            </div>
                            <button class="btn btn-primary mb-1" type="button" @click="save_data" :disabled="loading">Save</button>
                        </div>
                    </div>
                    <div class="row mb-3" v-show="loading">
                        <div class="col-12 d-flex justify-content-center">
                            <div class="p-2 text-center">
                                Loading data... Please wait...<br/>
                                <img class="mx-auto d-block" src="static/images/loading.svg">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row mb-3">
        <div class="col-12">
            <div class="card border-dark bg-squad-card text-white">
                <div class="card-header pt-1 pb-0 click-title collapsed border-complement scenario_title" data-toggle="collapse" data-target="#info-box" aria-expanded="false" aria-controls="info-box">
                    <h6 class="text-center pt-1">Information - Q/A</h6>
                    <div class="close text-white close-absolute">
                        <i class="toggle-button fas fa-caret-up"></i>
                    </div>
                </div>
                <div class="collapse" id="info-box">
                    <div class="card-body text-small pt-1 pb-2">
                        <div class="row justify-content-center">
                            <div class="col-12 col-md-8">
                                <b>What is this page about?</b>
                                <p class="answer">
                                    This page shows potential outcomes for next GW (GW{{ current_gw }}) using simulation replications.
                                </p>
                                <b>What is the purpose of it?</b>
                                <p class="answer">
                                    We already have great models for optimizing FPL decisions based on expected value (EV) -- projected points.
                                    Using these models will take you a step ahead of other managers, but for practical reasons, lack some aspects.
                                    For example, having two or more players on the same team or opposite teams for a game limits how many points you can get this GW.
                                    Therefore, even for two teams with exactly same EV but with different players, shape of the outcome distribution will be different.
                                    For example, we know that captaining a differential have a big upside, as well as a risky decision, but have no way to quantify it.
                                    Unless, we simulate match outcomes and see the distribution itself.
                                </p>
                                <b>Who needs this?</b>
                                <p class="answer">
                                    If you are interested in optimization for FPL and wondering what the potential outcomes look like for your team.
                                    Note that, this page shows example outcomes for reference, but I urge you to build your own simulator if you have the means.
                                </p>
                                <b>How do you generate simulation replications?</b>
                                <p class="answer">
                                    Using the Free Model of the amazing <a href="https://fplreview.com" target="_blank">FPLReview</a>, I collect goal/assist/bonus rates for each player.
                                    Then, using Monte-Carlo simulation (and a bunch of assumptions), I simulate the GW over and over.
                                    Similar stats (anytime goalscoring, anytime assist, clean sheet, etc...) are also available on several websites, but not being used here.
                                </p>
                                <b>What is included in simulations?</b>
                                <p class="answer">
                                    <ul>
                                        <li>Goal points</li>
                                        <li>Assist points</li>
                                        <li>Clean sheet points</li>
                                        <li>Goals conceded points</li>
                                        <li>Bonus points</li>
                                        <li>Autosub replacements</li>
                                    </ul>
                                </p>
                                <b>What are limitations and assumptions?</b>
                                <p class="answer">
                                    I am hoping to improve quality of simulations in future, but here are current limitations and assumptions.
                                    <ul>
                                        <li>Using expected minute values, I assume a player either plays 90 mins or 0 mins. No subs.</li>
                                        <li>Bonus point logic is a bit involved, but I assume only 1 player to get 3 points, 1 player to get 2 points and 1 player to get 1 bonus point.</li>
                                        <li>I exclude events like yellow card / red card / penalty miss / penalty save.</li>
                                        <li>Current model does not consider vice-captain switch</li>
                                    </ul>
                                </p>
                                <b>Why do we need simulation anyway?</b>
                                <p class="answer">
                                    If you are serious about optimizing your decisions for FPL, then the next step after the multi-period EV model is to use stochastic optimization.
                                    It is a better way to calculate probabilities and in general a better way to approach stochastic nature of FPL from a decision making perspective.
                                    Consider a simple case, where it is last GW of the season and you are in 2nd position OR.
                                    If you optimize over EV and get the same exact squad as the OR #1 manager, your chance of winning FPL becomes 0%.
                                    It is obvious that you need to find a player who is not owned by the top ranked manager, but have a solid EV value.
                                    Simulation, in this case for example, provide obvious benefits and can help you to calculate probability of winning.
                                    So, you can maximize probability of winning in an optimization model and increase your chance.
                                </p>
                                <b>Is 100 replications enough?</b>
                                <p class="answer">
                                    No, the more the better. But since this website is hosted on GitHub, I use GitHub actions to produce simulations every 6 hours.
                                    100 replications is the limit I can have without increasing my webpage build time significantly.
                                    It is also a good point as mobile devices get really slow during JS calculations.
                                    If you are doing it yourself, consider having as much replications as you can for the optimization purposes.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>


    <!-- <div class="card mt-1 mr-3 m-1 ml-3 bg-gray-3 text-small">
                        <div class="card-header pt-1 pb-0 click-title collapsed" data-toggle="collapse" data-target="#controls" aria-expanded="false" aria-controls="controls">
                            <span>Controls</span>
                            <div class="close text-white">
                                <i class="toggle-button fas fa-caret-up"></i>
                            </div>
                        </div>
                        <div class="collapse" id="controls">
                            <div class="card-body pt-1 pb-2 d-flex flex-wrap justify-content-center">
                                
                                Explanation goes here.
    
                            </div>
                        </div>
                    </div> -->

    <div class="row mb-3">
        <div class="col-12">
            <div class="card border-dark bg-squad-card text-white">
                <h6 class="card-header border-complement text-center scenario_title">Overview</h6>
                <div class="scenario_detail">
                    This tool uses 100 randomly generated simulations to evaluate your team selections for the next GW.<br />
                    These values are approximations based on EV values. For constructing a team, try <a href="https://fplreview.com/free-planner">FPLReview Planner</a>.
                </div>
                <div class="card-body text-center p-3" v-cloak>
                    <div class="row no-gutters justify-content-center">
                        <!-- Left side: field -->
                        <div class="col-12 col-md-6" id="field_portion">  
                            <!-- v-for="pick_list in [team_picks, rival_picks]"> -->
                            <div class="lineup gray-bg">
                                <h5 v-if="rival_mode">Your Team</h5>
                                <div class="d-flex justify-content-center">
                                    <button class="btn btn-sm chip-bboost ml-1 mr-1" :disabled="!team_ready" @click="toggle_bb('team_data')">BB</button>
                                    <button class="btn btn-sm chip-3xc ml-1 mr-1" :disabled="!team_ready" @click="toggle_tc('team_data')">TC</button>
                                </div>
                                <svg class="mx-auto d-block" viewBox="0 0 112.44791 174.72709" style="max-height: 700px">
                                    <svg class="field">
                                        <g class="g_field">
                                            <rect class="field-common" width="104.4753" height="136.70862" x="4.0935702" y="3.8053379" />
                                            <path class="field-common" d="M 9.7876973,3.8053379 A 5.6941271,5.6941271 0 0 1 4.0935704,9.499465 l -2e-7,-5.6941271 z" />
                                            <path class="field-common" id="right_top_corner" d="m 9.499465,-108.56887 a 5.6941271,5.6941271 0 0 1 -5.6941269,5.69413 l -2e-7,-5.69413 z" transform="rotate(90)" />
                                            <path class="field-common" id="right_bottom_corner" d="m -102.87474,-140.51396 a 5.6941271,5.6941271 0 0 1 -5.69413,5.69413 l 0,-5.69413 z" transform="scale(-1)" />
                                            <path class="field-common" id="left_bottom_corner" d="m -134.81983,4.0935702 a 5.6941271,5.6941271 0 0 1 -5.69413,5.6941271 l 0,-5.6941271 z" transform="rotate(-90)" />
                                            <rect class="field-common" id="top_penalty_box" width="46.726002" height="21.884615" x="32.992699" y="3.852963" />
                                            <rect class="field-common" id="top_inner_box" width="24.50474" height="11.328758" x="44.101284" y="3.828212" />
                                            <path class="field-common" id="top_arch" d="m 65.686854,25.720037 a 9.4620543,6.1092615 0 0 1 -4.731027,5.290776 9.4620543,6.1092615 0 0 1 -9.462054,0 9.4620543,6.1092615 0 0 1 -4.731027,-5.290776 l 9.462054,0 z" />
                                            <path class="field-common" id="bottom_arch" d="m -47.240994,-118.62238 a 9.4620543,6.1092615 0 0 1 -4.731028,5.29077 9.4620543,6.1092615 0 0 1 -9.462054,0 9.4620543,6.1092615 0 0 1 -4.731027,-5.29077 l 9.462054,0 z" transform="scale(-1)" />
                                            <rect class="field-common" id="bottom_penalty_box" width="46.726002" height="21.884615" x="-79.962532" y="-140.46913" transform="scale(-1)" />
                                            <rect class="field-common" id="bottom_inner_box" width="24.50474" height="11.328759" x="-68.851799" y="-140.42613" transform="scale(-1)" />
                                            <circle class="field-common" id="kick_off" cx="55.893227" cy="71.70208" r="14.196868" />
                                            <path class="field-common field-last-path" d="M 4.1010416,71.569791 H 108.51143" id="center_line" inkscape:connector-curvature="0"/>
                                            <rect class="field-common" id="bench_box" width="104.4753" height="30" x="4.0935702" y="140.51396" />
                                        </g>
                                    </svg>
                                    <svg id="player_group" x=0 y=0 :class="{'calculating': calculating}">
                                        <svg v-for="(player,order) in team_picks" :x="player.x" :y="player.y" style="overflow: visible;">
                                            <g class="g_jersey" style="transform:translate(0,0)" :data-pid="player.element">
                                                <image :href="player.img" width=17 height=17 x="0%" y="0%" style="transform: translate(1.5px,0.5px)" v-if="![388, 601].includes(player.element)"></image>
                                                <!-- Select captain -->
                                                <g v-if="player.multiplier > 0" :class="{'half-opacity': player.multiplier <= 1}">
                                                    <circle cx="18" cy="10" r="3.5" style="opacity:0" @click="select_captain(player.element)" />
                                                    <circle cx="18" cy="10" r="1.75" :class="{'empty_captain': player.multiplier <= 1, 'current_captain': player.multiplier > 1}"  @click="select_captain(player.element)" />
                                                    <text x="18" y="10" class="field_icons captain_text" :class="{'tc-on-field': player.multiplier > 2.5}">{{ player.multiplier > 2.5 ? "TC" : "C" }}</text>
                                                </g>
                                                <!-- Select VC -->
                                                <g v-if="player.multiplier > 0" :class="{'half-opacity': !player.is_vice_captain}">
                                                    <circle cx="18" cy="15" r="3.5" style="opacity:0" @click="select_vice_captain(player.element)" />
                                                    <circle cx="18" cy="15" r="1.75" :class="{'empty_captain': !player.is_vice_captain, 'current_vcaptain': player.is_vice_captain}"  @click="select_vice_captain(player.element)" />
                                                    <text x="18" y="15" class="field_icons captain_text">V</text>
                                                </g>
                                                <!-- Transfer Out -->
                                                <g :class="{'half-opacity': player.element != picked_out}">
                                                    <rect x="13" y="0" width="8" height="8" style="opacity:0" @click="select_out(player.element)" />
                                                    <rect x="15" y="2" width="4" height="4" :class="{'empty_out': player.element != picked_out, 'selected_out': player.element == picked_out}" @click="select_out(player.element)" />
                                                    <text x="17" y="4" class="field_icons out_text">X</text>
                                                </g>
                                                <!-- Swap bench -->
                                                <g :class="{'half-opacity': player.element != swap_out}" v-show="swap_out == undefined || player.swap_available || player.element == swap_out">
                                                    <rect x="-1" y="0" width="8" height="8" style="opacity:0" @click="select_swap(player.element)" />
                                                    <rect x="1" y="2" width="4" height="4" :class="{'empty_out': player.element != swap_out, 'selected_out': player.element == swap_out}" @click="select_swap(player.element)" />
                                                    <text x="3" y="4" class="field_icons out_text">⇅</text>
                                                </g>
                                                
                                                <g  style="transform: translate(0,17.5px)">
                                                    <g>
                                                        <text y="285.37598" x="9.281539" class="jersey-regular-text">
                                                            <tspan
                                                                class="jersey-xp-text"
                                                                y="285.37598" x="9.281539"  ><tspan style="font-size:5.5px" >{{ player.points_total }}</tspan>
                                                            </tspan>
                                                        </text>
                                                        <!-- <text  y="0" x="0" class="jersey-regular-text jersey-team-text">
                                                            <tspan v-if="player.multiplier==2"
                                                                class="jersey-captain-star"
                                                                y="-15" x="2"  >★</tspan>
                                                        </text> -->
                                                        <rect y="0" x="0" height="4" width="19" class="jersey-name-bg" />
                                                        <rect y="4" x="0" height="3" width="19" class="jersey-team-bg" />
                                                        <rect y="7" x="0" height="3" width="19" class="jersey-xp-bg" />
                                                        <text  y="2" x="9" class="jersey-regular-text" xml:space="preserve">
                                                            <tspan
                                                                class="jersey-player-name"
                                                                y="3" x="9.4" style="font-size: 2.2pt;">{{ player.data.web_name }}</tspan>
                                                        </text>
                                                        <text y="7" x="9" class="jersey-regular-text" 
                                                            xml:space="preserve">
                                                            <!-- <tspan class="jersey-team-name" y="6.5" x="9" style="font-size: 2pt;" >{{ teams_ordered[player.data.team-1].name }}</tspan> -->
                                                            <tspan class="jersey-team-name" y="6.5" x="9.4" style="font-size: 2pt;" >{{ fixture_dict[player.data.team].str }}</tspan>
                                                        </text>
                                                        <text y="8.5" x="1" style="text-anchor:start" class="jersey-xp-avg"><tspan class="jersey-xp-tag">P</tspan> {{ sc_player_avg_full[player.element].avg }}</text>
                                                        <text y="8.5" x="18" style="text-anchor:end" class="jersey-xp-avg"><tspan class="jersey-xp-tag">P90</tspan> {{ sc_player_avg_full[player.element].pps }}</text>
                                                    </g>
                                                </g>
                                            </g>
                                        </svg>
                                    </svg>
                                </svg>
                                <div class="d-flex justify-content-center">
                                    <button class="btn btn-sm btn-secondary m-1" @click="saveMyTeam"><i class="fas fa-save"></i> Save</button>
                                    <label class="btn btn-sm btn-secondary m-1" for="load_my_team_selector">
                                        <input id="load_my_team_selector" type="file" class="d-none" accept=".json" @change="loadMyTeam">
                                        <i class="fas fa-folder-open"></i> Load
                                    </label>
                                    <button class="btn btn-sm btn-secondary m-1" @click="suggestTeam('team_data')"><i class="fas fa-exchange-alt"></i> Suggest Order</button>
                                    <button class="btn btn-sm btn-info m-1" @click="shareLink"  v-if="!_.isEmpty(team_data)"><i class="fas fa-share"></i> Share</button>
                                </div>
                                <div class="alert alert-success m-1" id="link-box" v-if="page_link != ''">
                                    <button type="button" class="close" @click="page_link=''">&times;</button>
                                    Link: <a :href="page_link" target="_blank">{{ page_link }}</a>
                                </div>
                                <div class="d-flex justify-content-center">
                                    <div class="input-group mb-3 w-auto">
                                        <input type="text" class="form-control" placeholder="Penalty/Lead" aria-label="Penalty/Lead" aria-describedby="basic-addon2" id="my-penalty">
                                        <div class="input-group-append">
                                          <button class="btn btn-secondary" type="button" @click="savePenalty">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-md-1 text-center copy_button text-small d-flex flex-column" v-if="rival_mode">
                            <button @click="copy_left_to_right" class="btn btn-sm btn-secondary text-small"><i class="fas fa-angle-double-right"></i> Copy</button>
                            <button @click="copy_right_to_left" class="btn btn-sm btn-secondary mt-2 mb-2 text-small"><i class="fas fa-angle-double-left"></i> Copy</button>
                        </div>

                        <div class="col-12 col-md-6" id="field_portion_rival" v-if="rival_mode">  
                            <div class="lineup gray-bg">
                                <h5 v-if="rival_mode"><span style="color:darkkhaki">Rival</span> Team</h5>
                                <div class="d-flex justify-content-center">
                                    <button class="btn btn-sm chip-bboost ml-1 mr-1" :disabled="!rival_ready" @click="toggle_bb('rival_data')">BB</button>
                                    <button class="btn btn-sm chip-3xc ml-1 mr-1" :disabled="!rival_ready" @click="toggle_tc('rival_data')">TC</button>
                                </div>
                                <svg class="mx-auto d-block" viewBox="0 0 112.44791 174.72709" style="max-height: 700px">
                                    <svg class="field">
                                        <g class="g_field">
                                            <rect class="field-common" width="104.4753" height="136.70862" x="4.0935702" y="3.8053379" />
                                            <path class="field-common" d="M 9.7876973,3.8053379 A 5.6941271,5.6941271 0 0 1 4.0935704,9.499465 l -2e-7,-5.6941271 z" />
                                            <path class="field-common" id="right_top_corner" d="m 9.499465,-108.56887 a 5.6941271,5.6941271 0 0 1 -5.6941269,5.69413 l -2e-7,-5.69413 z" transform="rotate(90)" />
                                            <path class="field-common" id="right_bottom_corner" d="m -102.87474,-140.51396 a 5.6941271,5.6941271 0 0 1 -5.69413,5.69413 l 0,-5.69413 z" transform="scale(-1)" />
                                            <path class="field-common" id="left_bottom_corner" d="m -134.81983,4.0935702 a 5.6941271,5.6941271 0 0 1 -5.69413,5.6941271 l 0,-5.6941271 z" transform="rotate(-90)" />
                                            <rect class="field-common" id="top_penalty_box" width="46.726002" height="21.884615" x="32.992699" y="3.852963" />
                                            <rect class="field-common" id="top_inner_box" width="24.50474" height="11.328758" x="44.101284" y="3.828212" />
                                            <path class="field-common" id="top_arch" d="m 65.686854,25.720037 a 9.4620543,6.1092615 0 0 1 -4.731027,5.290776 9.4620543,6.1092615 0 0 1 -9.462054,0 9.4620543,6.1092615 0 0 1 -4.731027,-5.290776 l 9.462054,0 z" />
                                            <path class="field-common" id="bottom_arch" d="m -47.240994,-118.62238 a 9.4620543,6.1092615 0 0 1 -4.731028,5.29077 9.4620543,6.1092615 0 0 1 -9.462054,0 9.4620543,6.1092615 0 0 1 -4.731027,-5.29077 l 9.462054,0 z" transform="scale(-1)" />
                                            <rect class="field-common" id="bottom_penalty_box" width="46.726002" height="21.884615" x="-79.962532" y="-140.46913" transform="scale(-1)" />
                                            <rect class="field-common" id="bottom_inner_box" width="24.50474" height="11.328759" x="-68.851799" y="-140.42613" transform="scale(-1)" />
                                            <circle class="field-common" id="kick_off" cx="55.893227" cy="71.70208" r="14.196868" />
                                            <path class="field-common field-last-path" d="M 4.1010416,71.569791 H 108.51143" id="center_line" inkscape:connector-curvature="0"/>
                                            <rect class="field-common" id="bench_box" width="104.4753" height="30" x="4.0935702" y="140.51396" />
                                        </g>
                                    </svg>
                                    <svg id="player_group" x=0 y=0 :class="{'calculating': calculating}">
                                        <svg v-for="(player,order) in rival_picks" :x="player.x" :y="player.y" style="overflow: visible;">
                                            <g class="g_jersey" style="transform:translate(0,0)" :data-pid="player.element">
                                                <image :href="player.img" width=17 height=17 x="0%" y="0%" style="transform: translate(1.5px,0.5px)" v-if="![388, 601].includes(player.element)"></image>
                                                <!-- Select captain -->
                                                <g v-if="player.multiplier > 0" :class="{'half-opacity': player.multiplier <= 1}">
                                                    <circle cx="18" cy="10" r="3.5" style="opacity:0" @click="select_captain_rival(player.element)" />
                                                    <circle cx="18" cy="10" r="1.75" :class="{'empty_captain': player.multiplier <= 1, 'current_captain': player.multiplier > 1}"  @click="select_captain_rival(player.element)" />
                                                    <text x="18" y="10" class="field_icons captain_text" :class="{'tc-on-field': player.multiplier > 2.5}">{{ player.multiplier > 2.5 ? "TC" : "C" }}</text>
                                                </g>
                                                <!-- Select VC -->
                                                <g v-if="player.multiplier > 0" :class="{'half-opacity': !player.is_vice_captain}">
                                                    <circle cx="18" cy="15" r="3.5" style="opacity:0" @click="select_vice_captain_rival(player.element)" />
                                                    <circle cx="18" cy="15" r="1.75" :class="{'empty_captain': !player.is_vice_captain, 'current_vcaptain': player.is_vice_captain}"  @click="select_vice_captain_rival(player.element)" />
                                                    <text x="18" y="15" class="field_icons captain_text">V</text>
                                                </g>
                                                <!-- Transfer Out -->
                                                <g :class="{'half-opacity': player.element != picked_out_rival}">
                                                    <rect x="13" y="0" width="8" height="8" style="opacity:0" @click="select_out_rival(player.element)" />
                                                    <rect x="15" y="2" width="4" height="4" :class="{'empty_out': player.element != picked_out_rival, 'selected_out': player.element == picked_out_rival}" @click="select_out_rival(player.element)" />
                                                    <text x="17" y="4" class="field_icons out_text">X</text>
                                                </g>
                                                <!-- Swap bench -->
                                                <g :class="{'half-opacity': player.element != swap_out_rival}" v-show="swap_out_rival == undefined || player.swap_available || player.element == swap_out_rival">
                                                    <rect x="-1" y="0" width="8" height="8" style="opacity:0" @click="select_swap_rival(player.element)" />
                                                    <rect x="1" y="2" width="4" height="4" :class="{'empty_out': player.element != swap_out_rival, 'selected_out': player.element == swap_out_rival}" @click="select_swap_rival(player.element)" />
                                                    <text x="3" y="4" class="field_icons out_text">⇅</text>
                                                </g>
                                                
                                                <g  transform="translate(0,17.5)">
                                                    <g>
                                                        <text y="285.37598" x="9.281539" class="jersey-regular-text">
                                                            <tspan
                                                                class="jersey-xp-text"
                                                                y="285.37598" x="9.281539"  ><tspan style="font-size:5.5px" >{{ player.points_total }}</tspan>
                                                            </tspan>
                                                        </text>
                                                        <!-- <text  y="0" x="0" class="jersey-regular-text jersey-team-text">
                                                            <tspan v-if="player.multiplier==2"
                                                                class="jersey-captain-star"
                                                                y="-15" x="2"  >★</tspan>
                                                        </text> -->
                                                        <rect y="0" x="0" height="4" width="19" class="jersey-name-bg" />
                                                        <rect y="4" x="0" height="3" width="19" class="jersey-team-bg" />
                                                        <rect y="7" x="0" height="3" width="19" class="jersey-xp-bg" />
                                                        <text  y="2" x="9" class="jersey-regular-text" xml:space="preserve">
                                                            <tspan
                                                                class="jersey-player-name"
                                                                y="3" x="9.4" style="font-size: 2.2pt;">{{ player.data.web_name }}</tspan>
                                                        </text>
                                                        <text y="7" x="9" class="jersey-regular-text" 
                                                            xml:space="preserve">
                                                            <!-- <tspan class="jersey-team-name" y="6.5" x="9" style="font-size: 2pt;" >{{ teams_ordered[player.data.team-1].name }}</tspan> -->
                                                            <tspan class="jersey-team-name" y="6.5" x="9.4" style="font-size: 2pt;" >{{ fixture_dict[player.data.team].str }}</tspan>
                                                        </text>
                                                        <text y="8.5" x="1" style="text-anchor:start" class="jersey-xp-avg"><tspan class="jersey-xp-tag">P</tspan> {{ sc_player_avg_full[player.element].avg }}</text>
                                                        <text y="8.5" x="18" style="text-anchor:end" class="jersey-xp-avg"><tspan class="jersey-xp-tag">P90</tspan> {{ sc_player_avg_full[player.element].pps }}</text>
                                                    </g>
                                                </g>
                                            </g>
                                        </svg>
                                    </svg>
                                </svg>
                                <div class="d-flex justify-content-center">
                                    <button class="btn btn-sm btn-secondary m-1" @click="saveRivalTeam"><i class="fas fa-save"></i> Save</button>
                                    <label class="btn btn-sm btn-secondary m-1" for="load_rival_team_selector">
                                        <input id="load_rival_team_selector" type="file" class="d-none" accept=".json" @change="loadRivalTeam">
                                        <i class="fas fa-folder-open"></i> Load
                                    </label>
                                    <button class="btn btn-sm btn-secondary m-1" @click="suggestTeam('rival_data')"><i class="fas fa-exchange-alt"></i> Suggest Order</button>
                                </div>
                                <div class="d-flex justify-content-center">
                                    <div class="input-group mb-3 w-auto">
                                        <input type="text" class="form-control" placeholder="Penalty/Lead" aria-label="Penalty/Lead" aria-describedby="basic-addon2" id="rival-penalty">
                                        <div class="input-group-append">
                                          <button class="btn btn-secondary" type="button" @click="saveRivalPenalty">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        
                        
                        <div class="col-12 row" v-if="rival_mode">
                            
                            <div class="col-12 col-md-4">
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Win
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ _.round(scenario_head_2_head.win,0) }}%
                                    </div>
                                </div>    
                            </div>

                            <div class="col-12 col-md-4">
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Tie
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ _.round(scenario_head_2_head.tie,0) }}%
                                    </div>
                                </div>    
                            </div>

                            <div class="col-12 col-md-4">
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Loss
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ _.round(scenario_head_2_head.loss,0) }}%
                                    </div>
                                </div>    
                            </div>
    
                        </div>

                        <div class="col-12 row" v-if="rival_mode">
                            
                            <div class="col-12 col-md-4">
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Best Diff to Rival
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ scenario_head_2_head.max }}
                                    </div>
                                </div>    
                            </div>

                            <div class="col-12 col-md-4">
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Mean Diff to Rival
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ scenario_head_2_head.mean }}
                                    </div>
                                </div>    
                            </div>

                            <div class="col-12 col-md-4">
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Worst Diff to Rival
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ scenario_head_2_head.min }}
                                    </div>
                                </div>    
                            </div>
    
                        </div>

                        <!-- Right side: data values -->
                        <div class="col-12 col-md-6 p-2" v-show="picked_out == undefined" id="data_outcome" style="background-color: #474747;">
                            <div class="red-border-bottom text-center mb-3">
                                <b>Points Analysis</b>
                                <div class="close text-white close-absolute" @click="saveImage('#data_outcome', 'results.png')" v-if="!_.isEmpty(scenario_stats)">
                                    <i class="fas fa-image"></i>
                                </div>
                            </div>
                            <div class="summary-box row no-gutters overflow-hidden mb-2" v-if="my_penalty != 0">
                                <div class="col-6 p-1 title-side">
                                    Penalty/Lead
                                </div>
                                <div class="col-6 p-1 value-side">
                                    {{ my_penalty }} pts
                                </div>
                            </div>
                            <div class="summary-box row no-gutters overflow-hidden mb-2">
                                <div class="col-6 p-1 title-side">
                                    Average
                                </div>
                                <div class="col-6 p-1 value-side">
                                    {{ scenario_stats.avg_score }} pts
                                </div>
                            </div>
                            <!-- <div class="summary-box row no-gutters overflow-hidden mb-2">
                                <div class="col-6 p-1 title-side">
                                    Confidence Interval
                                </div>
                                <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                    <span>{{ (scenario_stats.conf_interval && scenario_stats.conf_interval[0].toFixed(2)) || "" }} - {{ (scenario_stats.conf_interval && scenario_stats.conf_interval[1].toFixed(2)) || "" }} pts</span>
                                </div>
                            </div> -->
                            <div class="summary-box row no-gutters overflow-hidden mb-2">
                                <div class="col-6 p-1 title-side d-flex flex-column justify-content-center">
                                    <div>Box Plot</div>
                                    <div class="text-small">Min-Q1-Median-Q3-Max</div>
                                </div>
                                <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                    <span v-if="!_.isEmpty(scenario_stats)">
                                        <svg :view-box.camel="'0 0 ' + Math.max(scenario_stats.quantiles[4]+10, 110) + ' 35'" width="100%">
                                            <g>
                                                <line :x1="scenario_stats.quantiles[0]" :x2="scenario_stats.quantiles[4]" y1="10" y2="10" stroke-width="1" stroke="#ffffff"  fill="none"></line>
                                                <circle :cx="scenario_stats.quantiles[0]" cy="10" r="2" fill="#238381" stroke="white" stroke-width="1" />
                                                <circle :cx="scenario_stats.quantiles[4]" cy="10" r="2" fill="#238381" stroke="white" stroke-width="1" />
                                                <rect :x="scenario_stats.quantiles[1]" :width="scenario_stats.quantiles[3]-scenario_stats.quantiles[1]" y="0" height="20" fill="#238381" stroke="white" stroke-width="1" />
                                                <line :x1="scenario_stats.quantiles[2]" :x2="scenario_stats.quantiles[2]" y1="0" y2="20" stroke-width="1" stroke="#ffffff" fill="none"></line>
                                                <text :x="scenario_stats.quantiles[0]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats.quantiles[0]*10)/10 }}</text>
                                                <text :x="scenario_stats.quantiles[4]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats.quantiles[4]*10)/10 }}</text>
                                                <text :x="scenario_stats.quantiles[1]" y="30" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats.quantiles[1]*10)/10 }}</text>
                                                <text :x="scenario_stats.quantiles[3]" y="30" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats.quantiles[3]*10)/10 }}</text>
                                                <text :x="scenario_stats.quantiles[2]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats.quantiles[2]*10)/10 }}</text>
                                            </g>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            <div class="summary-box row no-gutters overflow-hidden mb-2">
                                <div class="col-6 p-1 title-side">
                                    Most Points<br/><span class="scenario-link" :data-id="scenario_stats.best_one && scenario_stats.best_one.sim" @click="activate_with_link">Scenario #{{ (scenario_stats.best_one && scenario_stats.best_one.sim) || '' }}</span>
                                </div>
                                <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                    <span>{{ (scenario_stats.best_one && scenario_stats.best_one.total_score) || 0 }} pts</span>
                                </div>
                            </div>
                            <div class="summary-box row no-gutters overflow-hidden mb-2">
                                <div class="col-6 p-1 title-side">
                                    Least Points<br/><span class="scenario-link" :data-id="scenario_stats.worst_one && scenario_stats.worst_one.sim" @click="activate_with_link">Scenario #{{ (scenario_stats.worst_one && scenario_stats.worst_one.sim) || '' }}</span>
                                </div>
                                <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                    <span>{{ (scenario_stats.worst_one && scenario_stats.worst_one.total_score) || 0 }} pts</span>
                                </div>
                            </div>
                            <div class="summary-box row no-gutters overflow-hidden mb-2">
                                <div class="col-6 p-1 title-side">
                                    Avg. Lineup Points
                                </div>
                                <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                    <span>{{ (scenario_stats.lineup_avg || 0).toFixed(2) }} pts</span>
                                </div>
                            </div>
                            <div class="summary-box row no-gutters overflow-hidden mb-2">
                                <div class="col-6 p-1 title-side">
                                    Avg. Autosub Points
                                </div>
                                <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                    <span>{{ (scenario_stats.autosub_avg || 0).toFixed(2) }} pts</span>
                                </div>
                            </div>

                            <div class="red-border-bottom text-center mt-1">
                                <b>Difference to Field Average Analysis</b>
                            </div>
                            <div class="summary-box row no-gutters overflow-hidden mt-3 mb-2">
                                <div class="col-6 p-1 title-side">
                                    Average
                                </div>
                                <div class="col-6 p-1 value-side">
                                    {{ getWithSign(scenario_stats.avg_diff) }} pts
                                </div>
                            </div>
                            <div class="summary-box row no-gutters overflow-hidden mb-2">
                                <div class="col-6 p-1 title-side d-flex flex-column justify-content-center">
                                    <div>Box Plot</div>
                                    <div class="text-small">Min-Q1-Median-Q3-Max</div>
                                </div>
                                <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                    <span v-if="!_.isEmpty(scenario_stats)">
                                        <svg :view-box.camel=" -Math.max(50, scenario_stats.diff_quantiles[4]*1.2, -scenario_stats.diff_quantiles[0]*1.2) + ' 0 ' + 2*(Math.max(50, scenario_stats.diff_quantiles[4]*1.2, -scenario_stats.diff_quantiles[0]*1.2)) + ' 35'" width="100%">
                                            <g>
                                                <line :x1="scenario_stats.diff_quantiles[0]" :x2="scenario_stats.diff_quantiles[4]" y1="10" y2="10" stroke-width="1" stroke="#ffffff"  fill="none"></line>
                                                <circle :cx="scenario_stats.diff_quantiles[0]" cy="10" r="2" fill="#238381" stroke="white" stroke-width="1" />
                                                <circle :cx="scenario_stats.diff_quantiles[4]" cy="10" r="2" fill="#238381" stroke="white" stroke-width="1" />
                                                <rect :x="scenario_stats.diff_quantiles[1]" :width="scenario_stats.diff_quantiles[3]-scenario_stats.diff_quantiles[1]" y="0" height="20" fill="#238381" stroke="white" stroke-width="1" />
                                                <line :x1="scenario_stats.diff_quantiles[2]" :x2="scenario_stats.diff_quantiles[2]" y1="0" y2="20" stroke-width="1" stroke="#ffffff" fill="none"></line>
                                                <text :x="scenario_stats.diff_quantiles[0]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats.diff_quantiles[0]*100)/100 }}</text>
                                                <text :x="scenario_stats.diff_quantiles[4]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats.diff_quantiles[4]*100)/100 }}</text>
                                                <text :x="scenario_stats.diff_quantiles[1]" y="30" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats.diff_quantiles[1]*100)/100 }}</text>
                                                <text :x="scenario_stats.diff_quantiles[3]" y="30" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats.diff_quantiles[3]*100)/100 }}</text>
                                                <text :x="scenario_stats.diff_quantiles[2]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats.diff_quantiles[2]*100)/100 }}</text>
                                            </g>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            
                            <div class="summary-box row no-gutters overflow-hidden mb-2">
                                <div class="col-6 p-1 title-side">
                                    Best Diff. to Field<br/><span class="scenario-link" :data-id="scenario_stats.best_diff && scenario_stats.best_diff.sim" @click="activate_with_link">Scenario #{{ (scenario_stats.best_diff && scenario_stats.best_diff.sim) || '' }}</span>
                                </div>
                                <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                    <span>{{ getWithSign((scenario_stats.best_diff && scenario_stats.best_diff.diff) || 0) }} pts</span>
                                </div>
                            </div>
                            <div class="summary-box row no-gutters overflow-hidden mb-2">
                                <div class="col-6 p-1 title-side">
                                    Worst Diff. to Field<br/><span class="scenario-link" :data-id="scenario_stats.worst_diff && scenario_stats.worst_diff.sim" @click="activate_with_link">Scenario #{{ (scenario_stats.worst_diff && scenario_stats.worst_diff.sim) || '' }}</span>
                                </div>
                                <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                    <span>{{ getWithSign((scenario_stats.worst_diff && scenario_stats.worst_diff.diff) || 0) }} pts</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6" v-show="picked_out != undefined" id="select_portion">
                            <div class="red-border-bottom mb-2"><b>Click on a row to replace player</b></div>
                            <div class="table-responsive">
                                <table class="table table-sm text-small text-white" id="replacement_options">
                                    <thead>
                                        <tr>
                                            <!-- <th class="text-muted text-center">ID</th> -->
                                            <th>Position</th>
                                            <th>Name</th>
                                            <th>Team</th>
                                            <th>Price</th>
                                            <th>Own%</th>
                                            <th>Avg.Pts</th>
                                            <th>Pts per App.</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="player in elements" v-if="player.element_type == player_filter" @click="team_ids.includes(player.id) ? {} : transfer_in(player.id)" :class="{'player-clickable': !team_ids.includes(player.id), 'player-disabled': team_ids.includes(player.id)}">
                                            <!-- <td class="text-muted">{{ player.id }}</td> -->
                                            <td>{{ element_type[player.element_type].short }}</td>
                                            <td>{{ player.web_name }}</td>
                                            <td>{{ teams_ordered[player.team-1].short }}</td>
                                            <td>{{ (player.now_cost / 10).toFixed(1) }}</td>
                                            <td>{{ player.selected_by_percent }}%</td>
                                            <!-- <td>{{ sc_player_averages.avg[player.id] ? _.round(sc_player_averages.avg[player.id],1) : "-" }}</td>
                                            <td>{{ sc_player_averages.pps[player.id] ? _.round(sc_player_averages.pps[player.id],1) : "-" }}</td> -->
                                            <td>{{ sc_player_avg_full[player.id].avg }}</td>
                                            <td>{{ sc_player_avg_full[player.id].pps }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <template v-if="rival_mode">
                            <div class="col-12 col-md-6 p-2" v-show="picked_out_rival == undefined" id="data_outcome_rival" style="background-color: #474747;">
                                <div class="red-border-bottom text-center mb-3">
                                    <b><span style="color: darkkhaki">Rival</span> Points Analysis</b>
                                    <div class="close text-white close-absolute" @click="saveImage('#data_outcome', 'results.png')" v-if="!_.isEmpty(scenario_evals_rival)">
                                        <i class="fas fa-image"></i>
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2" v-if="rival_penalty != 0">
                                    <div class="col-6 p-1 title-side">
                                        Penalty/Lead
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ rival_penalty }} pts
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Average
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ scenario_stats_rival.avg_score }} pts
                                    </div>
                                </div>
                                <!-- <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Confidence Interval
                                    </div>
                                    <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                        <span>{{ (scenario_stats.conf_interval && scenario_stats.conf_interval[0].toFixed(2)) || "" }} - {{ (scenario_stats.conf_interval && scenario_stats.conf_interval[1].toFixed(2)) || "" }} pts</span>
                                    </div>
                                </div> -->
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side d-flex flex-column justify-content-center">
                                        <div>Box Plot</div>
                                        <div class="text-small">Min-Q1-Median-Q3-Max</div>
                                    </div>
                                    <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                        <span v-if="!_.isEmpty(scenario_stats_rival)">
                                            <svg :view-box.camel="'0 0 ' + Math.max(scenario_stats_rival.quantiles[4]+10, 110) + ' 35'" width="100%">
                                                <g>
                                                    <line :x1="scenario_stats_rival.quantiles[0]" :x2="scenario_stats_rival.quantiles[4]" y1="10" y2="10" stroke-width="1" stroke="#ffffff"  fill="none"></line>
                                                    <circle :cx="scenario_stats_rival.quantiles[0]" cy="10" r="2" fill="#238381" stroke="white" stroke-width="1" />
                                                    <circle :cx="scenario_stats_rival.quantiles[4]" cy="10" r="2" fill="#238381" stroke="white" stroke-width="1" />
                                                    <rect :x="scenario_stats_rival.quantiles[1]" :width="scenario_stats_rival.quantiles[3]-scenario_stats_rival.quantiles[1]" y="0" height="20" fill="#238381" stroke="white" stroke-width="1" />
                                                    <line :x1="scenario_stats_rival.quantiles[2]" :x2="scenario_stats_rival.quantiles[2]" y1="0" y2="20" stroke-width="1" stroke="#ffffff" fill="none"></line>
                                                    <text :x="scenario_stats_rival.quantiles[0]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats_rival.quantiles[0]*10)/10 }}</text>
                                                    <text :x="scenario_stats_rival.quantiles[4]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats_rival.quantiles[4]*10)/10 }}</text>
                                                    <text :x="scenario_stats_rival.quantiles[1]" y="30" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats_rival.quantiles[1]*10)/10 }}</text>
                                                    <text :x="scenario_stats_rival.quantiles[3]" y="30" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats_rival.quantiles[3]*10)/10 }}</text>
                                                    <text :x="scenario_stats_rival.quantiles[2]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats_rival.quantiles[2]*10)/10 }}</text>
                                                </g>
                                            </svg>
                                        </span>
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Most Points<br/><span class="scenario-link" :data-id="scenario_stats_rival.best_one && scenario_stats_rival.best_one.sim" @click="activate_with_link">Scenario #{{ (scenario_stats_rival.best_one && scenario_stats_rival.best_one.sim) || '' }}</span>
                                    </div>
                                    <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                        <span>{{ (scenario_stats_rival.best_one && scenario_stats_rival.best_one.total_score) || 0 }} pts</span>
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Least Points<br/><span class="scenario-link" :data-id="scenario_stats_rival.worst_one && scenario_stats_rival.worst_one.sim" @click="activate_with_link">Scenario #{{ (scenario_stats_rival.worst_one && scenario_stats_rival.worst_one.sim) || '' }}</span>
                                    </div>
                                    <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                        <span>{{ (scenario_stats_rival.worst_one && scenario_stats_rival.worst_one.total_score) || 0 }} pts</span>
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Avg. Lineup Points
                                    </div>
                                    <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                        <span>{{ (scenario_stats_rival.lineup_avg || 0).toFixed(2) }} pts</span>
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Avg. Autosub Points
                                    </div>
                                    <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                        <span>{{ (scenario_stats_rival.autosub_avg || 0).toFixed(2) }} pts</span>
                                    </div>
                                </div>
    
                                <div class="red-border-bottom text-center mt-1">
                                    <b><span style="color: darkkhaki">Rival</span> Difference to Field Average Analysis</b>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mt-3 mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Average
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ getWithSign(scenario_stats_rival.avg_diff) }} pts
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side d-flex flex-column justify-content-center">
                                        <div>Box Plot</div>
                                        <div class="text-small">Min-Q1-Median-Q3-Max</div>
                                    </div>
                                    <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                        <span v-if="!_.isEmpty(scenario_stats_rival)">
                                            <svg :view-box.camel=" -Math.max(50, scenario_stats_rival.diff_quantiles[4]*1.2, -scenario_stats_rival.diff_quantiles[0]*1.2) + ' 0 ' + 2*(Math.max(50, scenario_stats_rival.diff_quantiles[4]*1.2, -scenario_stats_rival.diff_quantiles[0]*1.2)) + ' 35'" width="100%">
                                                <g>
                                                    <line :x1="scenario_stats_rival.diff_quantiles[0]" :x2="scenario_stats_rival.diff_quantiles[4]" y1="10" y2="10" stroke-width="1" stroke="#ffffff"  fill="none"></line>
                                                    <circle :cx="scenario_stats_rival.diff_quantiles[0]" cy="10" r="2" fill="#238381" stroke="white" stroke-width="1" />
                                                    <circle :cx="scenario_stats_rival.diff_quantiles[4]" cy="10" r="2" fill="#238381" stroke="white" stroke-width="1" />
                                                    <rect :x="scenario_stats_rival.diff_quantiles[1]" :width="scenario_stats_rival.diff_quantiles[3]-scenario_stats_rival.diff_quantiles[1]" y="0" height="20" fill="#238381" stroke="white" stroke-width="1" />
                                                    <line :x1="scenario_stats_rival.diff_quantiles[2]" :x2="scenario_stats_rival.diff_quantiles[2]" y1="0" y2="20" stroke-width="1" stroke="#ffffff" fill="none"></line>
                                                    <text :x="scenario_stats_rival.diff_quantiles[0]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats_rival.diff_quantiles[0]*100)/100 }}</text>
                                                    <text :x="scenario_stats_rival.diff_quantiles[4]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats_rival.diff_quantiles[4]*100)/100 }}</text>
                                                    <text :x="scenario_stats_rival.diff_quantiles[1]" y="30" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats_rival.diff_quantiles[1]*100)/100 }}</text>
                                                    <text :x="scenario_stats_rival.diff_quantiles[3]" y="30" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats_rival.diff_quantiles[3]*100)/100 }}</text>
                                                    <text :x="scenario_stats_rival.diff_quantiles[2]" y="25" text-anchor="middle" alignment-baseline="central" dominant-baseline="central" font-size="3.5pt" fill="white">{{ Math.floor(scenario_stats_rival.diff_quantiles[2]*100)/100 }}</text>
                                                </g>
                                            </svg>
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Best Diff. to Field<br/><span class="scenario-link" :data-id="scenario_stats_rival.best_diff && scenario_stats_rival.best_diff.sim" @click="activate_with_link">Scenario #{{ (scenario_stats_rival.best_diff && scenario_stats_rival.best_diff.sim) || '' }}</span>
                                    </div>
                                    <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                        <span>{{ getWithSign((scenario_stats_rival.best_diff && scenario_stats_rival.best_diff.diff) || 0) }} pts</span>
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Worst Diff. to Field<br/><span class="scenario-link" :data-id="scenario_stats_rival.worst_diff && scenario_stats_rival.worst_diff.sim" @click="activate_with_link">Scenario #{{ (scenario_stats_rival.worst_diff && scenario_stats_rival.worst_diff.sim) || '' }}</span>
                                    </div>
                                    <div class="col-6 p-1 d-flex align-items-center justify-content-center value-side">
                                        <span>{{ getWithSign((scenario_stats_rival.worst_diff && scenario_stats_rival.worst_diff.diff) || 0) }} pts</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-6" v-show="picked_out_rival != undefined" id="select_portion_rival">
                                <div class="red-border-bottom mb-2"><b>Click on a row to replace player</b></div>
                                <div class="table-responsive">
                                    <table class="table table-sm text-small text-white" id="replacement_options_rival">
                                        <thead>
                                            <tr>
                                                <!-- <th class="text-muted text-center">ID</th> -->
                                                <th>Position</th>
                                                <th>Name</th>
                                                <th>Team</th>
                                                <th>Price</th>
                                                <th>Own%</th>
                                                <th>Avg.Pts</th>
                                                <th>Pts per App.</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="player in elements" v-if="player.element_type == player_filter_rival" @click="rival_ids.includes(player.id) ? {} : transfer_in_rival(player.id)" :class="{'player-clickable': !rival_ids.includes(player.id), 'player-disabled': rival_ids.includes(player.id)}">
                                                <!-- <td class="text-muted">{{ player.id }}</td> -->
                                                <td>{{ element_type[player.element_type].short }}</td>
                                                <td>{{ player.web_name }}</td>
                                                <td>{{ teams_ordered[player.team-1].short }}</td>
                                                <td>{{ (player.now_cost / 10).toFixed(1) }}</td>
                                                <td>{{ player.selected_by_percent }}%</td>
                                                <td>{{ sc_player_averages.avg[player.id] ? _.round(sc_player_averages.avg[player.id],1) : "-" }}</td>
                                                <td>{{ sc_player_averages.pps[player.id] ? _.round(sc_player_averages.pps[player.id],1) : "-" }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </template>
                        
                    </div>


                    <div class="row justify-content-center">
                        <div class="col-12 col-md-6">
                            <div class="red-border-bottom"><b>Probability of Points</b></div>
                            <div>
                                <div class="summary-box row no-gutters overflow-hidden mt-3 mb-2">
                                    <div class="col-6 p-1 title-side">
                                        20+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.probs['20+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        30+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.probs['30+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        40+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.probs['40+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        50+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.probs['50+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        60+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.probs['60+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        70+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.probs['70+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="col-12 col-md-6" v-if="rival_mode">
                            <div class="red-border-bottom"><b><span style="color: darkkhaki">Rival</span> Probability of Points</b></div>
                            <div>
                                <div class="summary-box row no-gutters overflow-hidden mt-3 mb-2">
                                    <div class="col-6 p-1 title-side">
                                        20+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.probs['20+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        30+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.probs['30+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        40+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.probs['40+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        50+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.probs['50+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        60+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.probs['60+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        70+ Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.probs['70+']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="col-12 col-md-6">
                            <div class="red-border-bottom"><b>Probability of Difference to Field Avg</b></div>
                            <div>
                                <div class="summary-box row no-gutters overflow-hidden mt-3 mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≤ -10 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.diff_probs['m10']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≤ -5 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.diff_probs['m5']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≤ 0 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.diff_probs['m0']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≥ 0 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.diff_probs['p0']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≥ +5 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.diff_probs['p5']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≥+10 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats.probs && scenario_stats.diff_probs['p10']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="col-12 col-md-6" v-if="rival_mode">
                            <div class="red-border-bottom"><b><span style="color: darkkhaki">Rival</span> Probability of Difference to Field Avg</b></div>
                            <div>
                                <div class="summary-box row no-gutters overflow-hidden mt-3 mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≤ -10 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.diff_probs['m10']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≤ -5 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.diff_probs['m5']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≤ 0 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.diff_probs['m0']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≥ 0 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.diff_probs['p0']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≥ +5 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.diff_probs['p5']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        ≥+10 Pts
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (((scenario_stats_rival.probs && scenario_stats_rival.diff_probs['p10']) || 0)*100).toFixed(0) }}%
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row mb-3">
        <div class="col-12">
            <div class="card border-dark bg-squad-card text-white" style="background-color: #474747;" id="player_pane">
                <div class="close text-white close-absolute" @click="saveImage('#player_pane', 'player_pane.png')" v-if="!_.isEmpty(scenario_stats)">
                    <i class="fas fa-image"></i>
                </div>
                <h6 class="card-header border-complement text-center scenario_title">Player Outcome</h6>

                <div class="card-body text-center p-3" v-cloak>

                    <div class="text-center mt-2 row">
                        <div class="form-group col">
                            <label for="player_sim_select">Player</label>
                            <select class="form-control" id="player_sim_select" @change="plot_player($event)" v-model="selected_id">
                                <option value=""></option>
                                <option v-for="(v,i) in sorted_player_list" :value="v.id">{{ v.web_name }}</option>
                            </select>
                        </div>
                        <div class="form-group col">
                            <label for="target_pts">Target Pts</label>
                            <select class="form-control" id="target_pts" @change="plot_current" v-model="target_pts">
                                <option :value="undefined"></option>
                                <option v-for="v in target_pts_range" :value="v">{{ v }}</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-2">
                        <div class="table-responsive mh-300">
                            <table class="table table-sm text-small table-striped table-dark sticky-top sticky-left">
                                <thead>
                                    <tr>
                                        <!-- <th>ID</th> -->
                                        <th>Player</th>
                                        <th>Play Prob %</th>
                                        <th class="clickable hover-blue" :class="{'sorted-by': sort_method == 'avg'}" @click="sort_method='avg'">Average Pts</th>
                                        <th class="clickable hover-blue" :class="{'sorted-by': sort_method == 'avg90'}" @click="sort_method='avg90'">Average Pts<br/>when Play</th>
                                        <th class="clickable hover-blue" :class="{'sorted-by': sort_method == 'q0'}" @click="sort_method='q0'">Min</th>
                                        <th class="clickable hover-blue" :class="{'sorted-by': sort_method == 'q25'}" @click="sort_method='q25'">Q1</th>
                                        <th class="clickable hover-blue" :class="{'sorted-by': sort_method == 'q50'}" @click="sort_method='q50'">Median</th>
                                        <th class="clickable hover-blue" :class="{'sorted-by': sort_method == 'q75'}" @click="sort_method='q75'">Q3</th>
                                        <th class="clickable hover-blue" :class="{'sorted-by': sort_method == 'q100'}" @click="sort_method='q100'">Max</th>
                                        <th class="clickable hover-blue" :class="{'sorted-by': sort_method == 'tp'}" @click="sort_method='tp'">Prob % >= Target</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="clickable" @click="selected_id = v.id; plot_player_graph(v.id)" v-for="v in sc_data_sorted" :class="{'highlight-player-table': v.id == selected_id}">
                                        <!-- <td>{{ v.id }}</td> -->
                                        <td>{{ v.web_name }}</td>
                                        <td>{{ (v.play_prob*100).toFixed(0) }}</td>
                                        <td>{{ (v.avg).toFixed(2) }}</td>
                                        <td>{{ isNaN(v.avg90) ? "-" : v.avg90.toFixed(2) }}</td>
                                        <td>{{ isNaN(v.q0  ) ? "-" : _.round(v.q0,   1) }}</td>
                                        <td>{{ isNaN(v.q25 ) ? "-" : _.round(v.q25,  1) }}</td>
                                        <td>{{ isNaN(v.q50 ) ? "-" : _.round(v.q50,  1) }}</td>
                                        <td>{{ isNaN(v.q75 ) ? "-" : _.round(v.q75,  1) }}</td>
                                        <td>{{ isNaN(v.q100) ? "-" : _.round(v.q100, 1) }}</td>
                                        <td>{{ isNaN(v.tp) ? "-" : _.round(v.tp*100, 1) }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div id="player_plot">
                        
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row mb-3">
        <div class="col-12">
            <div class="card border-dark bg-squad-card text-white" style="background-color: #474747;" id="results_pane">
                <div class="close text-white close-absolute" @click="saveImage('#results_pane', 'histogram.png')" v-if="!_.isEmpty(scenario_stats)">
                    <i class="fas fa-image"></i>
                </div>
                <h6 class="card-header border-complement text-center scenario_title">Simulations</h6>

                <div class="card-body text-center p-3" v-cloak>
                    <div id="controls" class="d-flex justify-content-center flex-wrap">
                        <div class="custom-control custom-switch ml-2 mr-2">
                            <input id="outcome_switch" class="custom-control-input mr-1" type="checkbox" data-toggle="toggle" v-model="show_outcomes" @change="refresh_histogram">
                            <label for="outcome_switch" class="custom-control-label">Team Point Distribution</label>
                        </div>
                        <div class="custom-control custom-switch ml-2 mr-2">
                            <input id="field_dist_switch" class="custom-control-input mr-1" type="checkbox" data-toggle="toggle" v-model="show_field" @change="refresh_histogram">
                            <label for="field_dist_switch" class="custom-control-label">Field Distribution</label>
                        </div>
                        <div class="custom-control custom-switch ml-2 mr-2">
                            <input id="diff_dist_switch" class="custom-control-input mr-1" type="checkbox" data-toggle="toggle" v-model="show_diff" @change="refresh_histogram">
                            <label for="diff_dist_switch" class="custom-control-label">Team vs Field Comparison</label>
                        </div>
                        <div class="custom-control custom-switch ml-2 mr-2">
                            <input id="diff_rdist_switch" class="custom-control-input mr-1" type="checkbox" data-toggle="toggle" v-model="show_diff_rival" @change="refresh_histogram">
                            <label for="diff_rdist_switch" class="custom-control-label">Team vs Rival Comparison</label>
                        </div>
                    </div>


                    <div class="row no-gutters justify-content-center" id="sim_portion">
                        <div class="col-12">
                            <div id="histogram" v-show="show_outcomes" class="mt-2 mb-1">

                            </div>
                            <div id="field_histogram" v-show="show_field" class="mt-2 mb-1">

                            </div>
                            <div id="diff_histogram" v-show="show_diff" class="mt-2 mb-1 col-9 mx-auto">

                            </div>
                            <div id="diff_histogram_rival" v-show="show_diff_rival" class="mt-2 mb-1 col-9 mx-auto">

                            </div>

                        </div>
                    </div>
                    <div class="row justify-content-center mt-2">
                        <div class="col-12 d-flex justify-content-center">
                            <div class="mb-2">
                                <div class="form-group">
                                    <label for="sc_select">Choose a simulation run</label>
                                    <select class="form-control" id="sc_select" v-model="active_rep_comp">
                                        <option :value="undefined"></option>
                                        <option v-for="(v,i) in grouped_scenarios" :value="i">{{ v.sim }}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 row mt-2">
                            <div class="col-12 col-md-4">
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Field Average
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (current_rep_values.total_field || 0).toFixed(2) }} pts
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-4">
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Team Points
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ (current_rep_values.total_score || 0).toFixed(0) }} pts
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-4">
                                <div class="summary-box row no-gutters overflow-hidden mb-2">
                                    <div class="col-6 p-1 title-side">
                                        Difference
                                    </div>
                                    <div class="col-6 p-1 value-side">
                                        {{ getWithSign(current_rep_values.diff || 0) }} pts
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 mb-3">
                            <div class="red-border-bottom mb-2">Top Players of Simulation Run</div>
                            <div class="table-responsive">
                                <table class="table table-sm text-white text-small table-striped" id="top_players">
                                    <thead>
                                        <tr>
                                            <!-- <th class="text-muted">ID</th> -->
                                            <th>Pos</th>
                                            <th>Name</th>
                                            <th>Team</th>
                                            <th>£</th>
                                            <th>Own%</th>
                                            <th>Points</th>
                                            <th>Gain/Loss</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="p in current_rep_players">
                                            <!-- <td class="text-muted">{{ p.ID }}</td> -->
                                            <td>{{ element_type[p.data.element_type].short }}</td>
                                            <td>{{ p.data.web_name }}</td>
                                            <td>{{ teams_ordered[p.data.team-1].short }}</td>
                                            <td>{{ p.data.now_cost / 10 }}</td>
                                            <td>{{ parseFloat(ownership_rate_dict[p.ID] || p.data.selected_by_percent).toFixed(1) }}%</td>
                                            <td>{{ p.Points }}</td>
                                            <td>{{ p.eff_points }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="red-border-bottom mb-2">Team Players</div>
                            <div class="table-responsive">
                                <table class="table table-sm text-white text-small" id="team_players">
                                    <thead>
                                        <tr>
                                            <!-- <th class="text-muted">ID</th> -->
                                            <th>Pos</th>
                                            <th>Name</th>
                                            <th>Team</th>
                                            <th>£</th>
                                            <th>Own%</th>
                                            <th>Points</th>
                                            <th>Gain/Loss</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="p in current_rep_team" v-if="active_rep != undefined" :class="{'owned-row': p.multiplier > 0, 'bench-row': p.multiplier==0}">
                                            <!-- <td class="text-muted">{{ p.element }}</td> -->
                                            <td>{{ element_type[p.data.element_type].short }}</td>
                                            <td>{{ p.data.web_name }}</td>
                                            <td>{{ teams_ordered[p.data.team-1].short }}</td>
                                            <td>{{ p.data.now_cost / 10 }}</td>
                                            <td>{{ p.data.selected_by_percent }}%</td>
                                            <td>{{ ( current_rep_dict[p.element] && current_rep_dict[p.element].Points) || 0 }}</td>
                                            <td>{{ p.eff_points }}</td>
                                        </tr>
                                        <tr>
                                            <!-- <td></td> -->
                                            <td></td>
                                            <td><i>Lineup Pts</i></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>{{ current_rep_values.lineup_score }}</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <!-- <td></td> -->
                                            <td></td>
                                            <td><i>Autosub Pts</i></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>{{ current_rep_values.autosub_score }}</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <!-- <td></td> -->
                                            <td></td>
                                            <td><i>Total</i></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>{{ current_rep_values.total_score }}</td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-12">
            <div class="card border-dark bg-squad-card text-white" style="background-color: #474747;" id="game_details_pane">
                <h6 class="card-header border-complement text-center scenario_title">Simulation Game Details</h6>
                <div class="card-body text-center p-3" v-cloak>
                    <div class="col-12 d-flex justify-content-center">
                        <div class="mb-2">
                            <div class="form-group">
                                <label for="sc_select">Choose a simulation run</label>
                                <select class="form-control" id="sc_select" v-model="active_rep_comp">
                                    <option :value="undefined">Average</option>
                                    <option v-for="(v,i) in grouped_scenarios" :value="i">{{ v.sim }}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-center" v-if="sc_game_details != undefined">
                        <div class="col-12 col-lg-8" v-if="active_rep_comp != undefined" v-for="play in [sc_game_details[active_rep_comp]]">
                            <div v-for="g in play['details']">
                                <div class="game-box mt-3">
                                    <div class="game-title">
                                        <div class="row justify-content-center">
                                            <div class="col text-right">{{ g.home.name }} <b class="event-score ml-2" >{{ g.score.home }}</b></div>
                                            <div class="col-2 col-lg-1 ">-</div>
                                            <div class="col text-left"><b class="event-score mr-2">{{ g.score.away }}</b> {{ g.away.name }}</div>
                                        </div>
                                    </div>
                                    <div class="game-body">
                                        <div class="row justify-content-center" v-for="event in g.events">
                                            <div class="col text-right">
                                                <div v-if="event.side == 'home'">
                                                    <span class="no-wrap d-inline-block"><b class="event-title">Goal</b> {{ elements_dict[event.goal] ? elements_dict[event.goal].web_name : '-' }}</span>
                                                    <span v-if="event.assist" class="no-wrap d-inline-block"><b class="event-title" >Assist</b> {{ event.assist ? (elements_dict[event.assist] ? elements_dict[event.assist].web_name : "-") : "-None-" }}</span>
                                                </div>
                                            </div>
                                            <div class="col-2 col-lg-1 ">{{ event.minute }}'</div>
                                            <div class="col text-left">
                                                <div v-if="event.side == 'away'">
                                                    <span class="no-wrap d-inline-block"><b class="event-title">Goal</b> {{ elements_dict[event.goal] ? elements_dict[event.goal].web_name : '-' }}</span>
                                                    <span v-if="event.assist" class="no-wrap d-inline-block"><b class="event-title" >Assist</b> {{ event.assist ? (elements_dict[event.assist] ? elements_dict[event.assist].web_name : "-") : "-None-" }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="game-footer">
                                        <div class="row justify-content-center">
                                            <div class="col text-right">
                                                <span class="no-wrap d-inline-block mr-1" v-for="p in get_top_three(g.points.home)">
                                                    {{ p[0] ? p[0].web_name : "-" }} ({{ p[1] }})
                                                </span>
                                            </div>
                                            <div class="col-2 col-lg-1 top-sign">Top 3</div>
                                            <div class="col text-left">
                                                <span class="no-wrap d-inline-block mr-1" v-for="p in get_top_three(g.points.away)">
                                                    {{ p[0] ? p[0].web_name : "-" }} ({{ p[1] }})
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-8" v-else>
                            <div v-for="g in sc_game_averages">
                                <div class="game-box mt-3">
                                    <div class="game-title">
                                        <div class="row justify-content-center">
                                            <div class="col text-right">{{ g.home.name }} <b class="event-score ml-2" >{{ g.home_avg }}</b></div>
                                            <div class="col-1">-</div>
                                            <div class="col text-left"><b class="event-score mr-2">{{ g.away_avg }}</b> {{ g.away.name }}</div>
                                        </div>
                                    </div>
                                    <div class="game-body">
                                        <div class="row justify-content-center">
                                            <div class="col text-right">Home Win</div>
                                            <div class="col-3 col-lg-2">Tie</div>
                                            <div class="col text-left">Away Win</div>
                                        </div>
                                        <div class="row justify-content-center">
                                            <div class="col text-right">{{ (g.home_win_avg * 100).toFixed(0) }}%</div>
                                            <div class="col-3 col-lg-2">{{ (g.tie_avg * 100).toFixed(0) }}%</div>
                                            <div class="col text-left">{{ (g.away_win_avg * 100).toFixed(0) }}%</div>
                                        </div>
                                    </div>
                                    <div class="game-footer">
                                        <div class="row justify-content-center">
                                            <div class="col text-right">Home Clean Sheet</div>
                                            <div class="col-3 col-lg-2 top-sign"></div>
                                            <div class="col text-left">Away Clean Sheet</div>
                                        </div>
                                        <div class="row justify-content-center">
                                            <div class="col text-right">{{ (g.home_cs * 100).toFixed(0) }}%</div>
                                            <div class="col-3 col-lg-2 top-sign"></div>
                                            <div class="col text-left">{{ (g.away_cs * 100).toFixed(0) }}%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center" v-else>
                        <span>- No scenario details available -</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row" v-cloak>
        <div class="col-12 mb-3">
            <div class="card border-dark bg-squad-card text-white qa">
                <div class="card-footer text-white disclaimer">
                    The information contained on this website is for general information purposes only. Any reliance you place on this information is strictly at your own risk.
                </div>
            </div>
        </div>
    </div>

    <div class="d-none">
        {{ graph_update_watch }}
    </div>

    <div class="modal fade" id="ownershipModal" tabindex="-1" role="dialog" aria-labelledby="ownershipModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ownershipModalLabel">Ownership Data Paste</h5>
                </div>
                <form v-on:submit.prevent>
                    <div class="modal-body">
                        <h5 class="mb-3"></h5>
                        <div class="form-group text-black">
                            <span class="text-left">Paste values from <a target="_blank" href="https://fploptimized.com/ownership_rates.html">https://fploptimized.com/ownership_rates.html</a></span>
                            <label for="team_data_input">Ownership Rates</label>
                            <textarea id="ownership_paste" rows="3" class="form-control"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" @click="saveOwnershipAndClose">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</main>

<main class="container text-white" v-else>
    <div class="row mb-3">
        <div class="col-12">
            <div class="card border-dark bg-squad-card text-white">
                <div class="p-2 text-center">
                    Loading data... Please wait...<br/>
                    <img class="mx-auto d-block" src="static/images/loading.svg">
                </div>
            </div>
        </div>
    </div>
</main>

<script>
    let sc_files = [["GW33", "data/2023-24/GW33/2024-04-08/output/scenarios.csv"], ["GW32", "data/2023-24/GW32/2024-04-05/output/scenarios.csv"], ["GW31", "data/2023-24/GW31/2024-04-02/output/scenarios.csv"], ["GW30", "data/2023-24/GW30/2024-03-29/output/scenarios.csv"], ["GW29", "data/2023-24/GW29/2024-03-16/output/scenarios.csv"], ["GW28", "data/2023-24/GW28/2024-03-08/output/scenarios.csv"], ["GW27", "data/2023-24/GW27/2024-03-02/output/scenarios.csv"], ["GW26", "data/2023-24/GW26/2024-02-24/output/scenarios.csv"], ["GW25", "data/2023-24/GW25/2024-02-16/output/scenarios.csv"], ["GW24", "data/2023-24/GW24/2024-02-09/output/scenarios.csv"], ["GW23", "data/2023-24/GW23/2024-02-02/output/scenarios.csv"], ["GW22", "data/2023-24/GW22/2024-01-30/output/scenarios.csv"], ["GW21", "data/2023-24/GW21/2024-01-12/output/scenarios.csv"], ["GW20", "data/2023-24/GW20/2023-12-30/output/scenarios.csv"], ["GW19", "data/2023-24/GW19/2023-12-26/output/scenarios.csv"], ["GW18", "data/2023-24/GW18/2023-12-21/output/scenarios.csv"], ["GW17", "data/2023-24/GW17/2023-12-15/output/scenarios.csv"], ["GW16", "data/2023-24/GW16/2023-12-09/output/scenarios.csv"], ["GW15", "data/2023-24/GW15/2023-12-05/output/scenarios.csv"], ["GW14", "data/2023-24/GW14/2023-12-02/output/scenarios.csv"], ["GW13", "data/2023-24/GW13/2023-11-25/output/scenarios.csv"], ["GW12", "data/2023-24/GW12/2023-11-11/output/scenarios.csv"], ["GW11", "data/2023-24/GW11/2023-11-04/output/scenarios.csv"], ["GW10", "data/2023-24/GW10/2023-10-27/output/scenarios.csv"], ["GW9", "data/2023-24/GW9/2023-10-20/output/scenarios.csv"], ["GW8", "data/2023-24/GW8/2023-10-06/output/scenarios.csv"], ["GW7", "data/2023-24/GW7/2023-09-29/output/scenarios.csv"], ["GW6", "data/2023-24/GW6/2023-09-23/output/scenarios.csv"], ["GW5", "data/2023-24/GW5/2023-09-15/output/scenarios.csv"], ["GW4", "data/2023-24/GW4/2023-09-01/output/scenarios.csv"], ["GW3", "data/2023-24/GW3/2023-08-25/output/scenarios.csv"], ["GW2", "data/2023-24/GW2/2023-08-18/output/scenarios.csv"], ["GW1", "data/2023-24/GW1/2023-08-11/output/scenarios.csv"]]
    let ts = 20240408101513
</script>

 </div>


<div class="container mb-3">
    <div class="row gray-bg no-gutters">
        <div class="banner-link col-12 col-md-6" style="border: 1px solid #343436;">
            <!-- <img src="/static/images/ffhub.png" />Partnered with Fantasy Football Hub
            <a href="https://fantasyfootballhub.co.uk/" class="stretched-link" target="_blank"></a> -->
        </div>
        <div class="banner-link col-12 col-md-6" style="border: 1px solid #343436;">
            <img src="/static/images/review.png" />EV data is courtesy of FPL Review
            <a href="https://fplreview.com/" class="stretched-link" target="_blank"></a>
        </div>
    </div>
</div>


<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.0.16/svg.js" integrity="sha512-M17tsaj3tHw5m/gI+8XjDLTuPZ0cpTofhFLJUT9niFa/DK8WAhsSLW764iSaaXoAoivXEFUP6VxvpiahJPQ4fg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js" integrity="sha512-WNLxfP/8cVYL9sj8Jnp6et0BkubLP31jhTG9vhL/F5uEZmg5wEzKoXp1kJslzPQWwPT1eyMiSxlKCgzHLOTOTQ==" crossorigin="anonymous"></script>
<script src="https://fastly.jsdelivr.net/npm/lodash@4.17.20/lodash.min.js" integrity="sha256-ur/YlHMU96MxHEsy3fHGszZHas7NzH4RQlD4tDVvFhw=" crossorigin="anonymous"></script>
<script src="https://fastly.jsdelivr.net/npm/vue@2.6.12"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
<script>
    Vue.config.performance = true;
    Vue.prototype.$log = console.log;
</script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jstat/1.9.5/jstat.js" integrity="sha512-D5uf20+sRi7oJxHzrp6LZDaY/IrSFIKmaQ7bOQA6V1Z+Jr9DOFKodR3RyYwdeEoGUZlfz76XQlDy5/TWdyKz9Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js" integrity="sha512-tVYBzEItJit9HXaWTPo8vveXlkK62LbA+wez9IgzjTmFNLMBO1BEYladBw2wnM3YURZSMUyhayPCoLtjGh84NQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://fastly.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.js" crossorigin="anonymous"></script>
<script src="https://fastly.jsdelivr.net/npm/vue-cookies@1.7.4/vue-cookies.js" integrity="sha256-pdSyqKvUOsiAZVUhatSOyW3Wom0l7ABtO8w7LjPA3vU=" crossorigin="anonymous"></script>
<!-- <script type="text/javascript" src="url_for('static', filename='3rdparty/vis-timeline-graph2d.min.js')"></script> -->

<!-- <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/fixedcolumns/3.3.2/js/dataTables.fixedColumns.min.js"></script> -->
<!-- <script src="https://cdn.datatables.net/responsive/2.2.6/js/dataTables.responsive.min.js"></script> -->
<!-- <script src="https://cdn.datatables.net/responsive/2.2.6/js/responsive.bootstrap4.min.js"></script> -->
<!-- <script src="https://cdn.datatables.net/fixedheader/3.1.7/js/dataTables.fixedHeader.min.js"></script> -->
<!-- <script src="https://cdn.datatables.net/searchbuilder/1.0.1/js/dataTables.searchBuilder.min.js"></script> -->

<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.23/b-1.6.5/b-colvis-1.6.5/b-html5-1.6.5/fc-3.3.2/fh-3.1.7/r-2.2.6/sp-1.2.2/datatables.min.js"></script>

<script src="https://fastly.jsdelivr.net/npm/fuse.js@6.4.3"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.21/jquery.csv.js" integrity="sha512-2ypsPur7qcA+2JjmmIJR1c4GWFqTLIe1naXXplraMg0aWyTOyAMpOk+QL+ULpzwrO/GdwA3qB3FhVyyiR8gdhw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://fastly.jsdelivr.net/npm/fernet@0.3.1/fernetBrowser.js"></script>

<script>
    let repo_name = ""
    let season = "2023-24";
    let gw = "GW33";
    let next_gw = "GW33";
    let date = "";
    let lastupdate = "";
    let listdates = [
    ];
    let is_active = false ;
    let active_gw = -1 ;
</script>


<script src="/static/js/main.js?ts=20240408101513"></script>

<script src="/static/js/sampling_utils.js?ts=20240408101513"></script>

<script src="/static/js/scenarios.js?ts=20240408101513"></script>


<script>
    $('.alert').alert()
</script>

</body>

<div class="text-muted text-center mx-auto text-small mb-1 c-footnote">Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>
<div class="mx-auto text-center d-block text-muted text-small mb-1">Last update: </div>

</html> 